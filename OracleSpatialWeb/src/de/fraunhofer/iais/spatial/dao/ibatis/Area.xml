<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper 
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="de.fraunhofer.iais.spatial.entity.Area">
<!-- cache: flushInterval: 24hours -->
<cache eviction="LRU" size="512" readOnly="true" flushInterval="86400000"></cache>
	<select id="selectAll" resultType="Area">
		select
			ID,
			NAME,
			GEOM,
			SDO_GEOM.SDO_AREA(m.geom, 0.005) as "area",
			SDO_GEOM.SDO_CENTROID(m.geom, d.diminfo) as "center"
		from AREAS20KMRADIUS m, user_sdo_geom_metadata d
		where d.table_name = 'AREAS20KMRADIUS'
	</select>

	<select id="selectById" resultType="Area" parameterType="int">
		select
			ID,
			NAME,
			GEOM,
			SDO_GEOM.SDO_AREA(m.geom, 0.005) as "area",
			SDO_GEOM.SDO_CENTROID(m.geom, d.diminfo) as "center"
		from AREAS20KMRADIUS m, user_sdo_geom_metadata d
		where d.table_name = 'AREAS20KMRADIUS' and m.ID = #{id}
	</select>

	<select id="select" resultType="Area" parameterType="oracle.spatial.geometry.JGeometry">
		select
			ID,
			NAME,
			GEOM,
			SDO_GEOM.SDO_AREA(m.geom, 0.005) as "area",
			SDO_GEOM.SDO_CENTROID(m.geom, d.diminfo) as "center"
		from AREAS20KMRADIUS m, user_sdo_geom_metadata d
		where d.table_name = 'AREAS20KMRADIUS' and sdo_relate(m.geom, #{j_geom},'mask=anyinteract') = 'TRUE'
	</select>
	
	<select id="personCount" resultType="String" parameterType="String">
		select person 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
	
	<select id="hourCount" resultType="String" parameterType="String">
		select hour 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
	
	<select id="dayCount" resultType="String" parameterType="String">
		select day 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
	
	<select id="monthCount" resultType="String" parameterType="String">
		select month 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
	
	<select id="yearCount" resultType="String" parameterType="String">
		select year 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
	
	<select id="totalCount" resultType="int" parameterType="String">
		select total 
		from AREAS20KMRADIUS_COUNT 
		where ID = #{id}
	</select>
</mapper>